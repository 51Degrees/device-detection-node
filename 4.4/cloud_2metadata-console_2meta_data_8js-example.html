<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Device Detection Node.js: cloud/metadata-console/metaData.js</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="../../documentation/4.4/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees Device Detection Node.js
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">51Degrees Device Detection for Node.js</div>
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('cloud_2metadata-console_2meta_data_8js-example.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="g-docs__header">
<h2 class="g-docs__page-title">cloud/metadata-console/metaData.js</h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<p>The cloud service exposes meta data that can provide additional information about the various properties that might be returned.This example shows how to access this data and display the values available.</p>
<p>A list of the properties will be displayed, along with some additional information about each property. Note that this is the list of properties used by the supplied resource key, rather than all properties that can be returned by the cloud service.</p>
<p>In addition, the evidence keys that are accepted by the service are listed. These are the keys that, when added to the evidence collection in flow data, could have some impact on the result that is returned.</p>
<p>Bear in mind that this is a list of ALL evidence keys accepted by all products offered by the cloud. If you are only using a single product (for example - device detection) then not all of these keys will be relevant.</p>
<p>This example is available in full on <a href="https://github.com/51Degrees/device-detection-node/blob/master/fiftyone.devicedetection.cloud/examples/cloud/metadata-console/metaData.js">GitHub</a>.</p>
<p>Required npm Dependencies:</p><ul>
<li>fiftyone.pipeline.cloudrequestengine</li>
<li>fiftyone.pipeline.core</li>
<li>fiftyone.pipeline.engines</li>
<li>fiftyone.pipeline.engines.fiftyone</li>
<li>fiftyone.devicedetection.cloud</li>
</ul>
<div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__comment">/* *********************************************************************</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><span class="c-code__comment"> * Copyright 2023 51 Degrees Mobile Experts Limited, Davidson House,</span></div><div class="c-code__line"><span class="c-code__comment"> * Forbury Square, Reading, Berkshire, United Kingdom RG1 3EU.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is licensed under the European Union Public Licence</span></div><div class="c-code__line"><span class="c-code__comment"> * (EUPL) v.1.2 and is subject to its terms as set out below.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If a copy of the EUPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><span class="c-code__comment"> * one at https://opensource.org/licenses/EUPL-1.2.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * The &#39;Compatible Licences&#39; set out in the Appendix to the EUPL (as may be</span></div><div class="c-code__line"><span class="c-code__comment"> * amended by the European Commission) shall be deemed incompatible for</span></div><div class="c-code__line"><span class="c-code__comment"> * the purposes of the Work and the provisions of the compatibility</span></div><div class="c-code__line"><span class="c-code__comment"> * clause in Article 5 of the EUPL shall not apply.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If using the Work as, or as part of, a network application, by</span></div><div class="c-code__line"><span class="c-code__comment"> * including the attribution notice(s) required under Article 5 of the EUPL</span></div><div class="c-code__line"><span class="c-code__comment"> * in the end user terms of the application under an appropriate heading,</span></div><div class="c-code__line"><span class="c-code__comment"> * such notice(s) shall fulfill the requirements of that article.</span></div><div class="c-code__line"><span class="c-code__comment"> * ********************************************************************* */</span></div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> path = require(<span class="c-code__stringliteral">&#39;path&#39;</span>);</div><div class="c-code__line"><span class="c-code__keyword">const</span> require51 = (requestedPackage) =&gt; {</div><div class="c-code__line">  <span class="c-code__keywordflow">try</span> {</div><div class="c-code__line">    <span class="c-code__keywordflow">return</span> require(path.join(__dirname, <span class="c-code__stringliteral">&#39;/../../../node_modules/&#39;</span>, requestedPackage));</div><div class="c-code__line">  } <span class="c-code__keywordflow">catch</span> (e) {</div><div class="c-code__line">    <span class="c-code__keywordflow">return</span> require(path.join(__dirname, <span class="c-code__stringliteral">&#39;/../../../../&#39;</span>, requestedPackage));</div><div class="c-code__line">  }</div><div class="c-code__line">};</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> <a name="_a0"></a><a class="code" href="class_example_utils.html">ExampleUtils</a> = require(path.join(__dirname, <span class="c-code__stringliteral">&#39;/../exampleUtils&#39;</span>));</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> <a name="_a1"></a><a class="code" href="class_device_detection_cloud_pipeline_builder.html">DeviceDetectionCloudPipelineBuilder</a> = require51(<span class="c-code__stringliteral">&#39;fiftyone.devicedetection.cloud&#39;</span>).DeviceDetectionCloudPipelineBuilder;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> outputProperties = <span class="c-code__keyword">function</span> (engine, output) {</div><div class="c-code__line">  <span class="c-code__keywordflow">for</span> (let property in engine.properties) {</div><div class="c-code__line">    <span class="c-code__keyword">property</span> = engine.properties[property];</div><div class="c-code__line">    output.write(`<a name="_a2"></a><a class="code" href="class_property.html">Property</a> - ${<span class="c-code__keyword">property</span>.name}`);</div><div class="c-code__line">    output.write(`[Category: ${<span class="c-code__keyword">property</span>.category}] (${<span class="c-code__keyword">property</span>.type})\n`);</div><div class="c-code__line">  }</div><div class="c-code__line">};</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> outputEvidenceKeyDetails = <span class="c-code__keyword">function</span> (engine, output) {</div><div class="c-code__line">  output.write(<span class="c-code__charliteral">&#39;\n&#39;</span>);</div><div class="c-code__line">  output.write(<span class="c-code__stringliteral">&#39;Accepted evidence keys:\n&#39;</span>);</div><div class="c-code__line">  <span class="c-code__keywordflow">for</span> (<span class="c-code__keyword">const</span> evidence of engine.evidenceKeyFilter.list) {</div><div class="c-code__line">    output.write(`\t${evidence}\n`);</div><div class="c-code__line">  }</div><div class="c-code__line">};</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> run = async <span class="c-code__keyword">function</span> (resourceKey, output) {</div><div class="c-code__line">  <span class="c-code__keyword">const</span> pipeline = <span class="c-code__keyword">new</span> <a class="code" href="class_device_detection_cloud_pipeline_builder.html">DeviceDetectionCloudPipelineBuilder</a>({</div><div class="c-code__line">    resourceKey</div><div class="c-code__line">  }).build();</div><div class="c-code__line"></div><div class="c-code__line">  <span class="c-code__keyword">const</span> device = pipeline.getElement(<span class="c-code__stringliteral">&#39;device&#39;</span>);</div><div class="c-code__line">  device.ready().then(<span class="c-code__keyword">function</span> () {</div><div class="c-code__line">    outputProperties(device, output);</div><div class="c-code__line">    <span class="c-code__comment">// We use the CloudRequestEngine to get evidence key details, rather than the</span></div><div class="c-code__line">    <span class="c-code__comment">// DeviceDetectionCloud.</span></div><div class="c-code__line">    <span class="c-code__comment">// This is because the DeviceDetectionCloud doesn&#39;t actually make use</span></div><div class="c-code__line">    <span class="c-code__comment">// of any evidence values. It simply processes the JSON that is returned</span></div><div class="c-code__line">    <span class="c-code__comment">// by the call to the cloud service that is made by the CloudRequestEngine.</span></div><div class="c-code__line">    <span class="c-code__comment">// The CloudRequestEngine is actually taking the evidence values and passing</span></div><div class="c-code__line">    <span class="c-code__comment">// them to the cloud, so that&#39;s the engine we want the keys from.</span></div><div class="c-code__line">    outputEvidenceKeyDetails(pipeline.getElement(<span class="c-code__stringliteral">&#39;cloud&#39;</span>), output);</div><div class="c-code__line">  }).<span class="c-code__keywordflow">catch</span>(<span class="c-code__keyword">function</span> (error) {</div><div class="c-code__line">    <span class="c-code__keywordflow">throw</span> error;</div><div class="c-code__line">  });</div><div class="c-code__line">};</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__comment">// Don&#39;t run the server if under TEST</span></div><div class="c-code__line"><span class="c-code__keywordflow">if</span> (process.env.JEST_WORKER_ID === undefined) {</div><div class="c-code__line">  <span class="c-code__keyword">const</span> args = process.argv.slice(2);</div><div class="c-code__line">  <span class="c-code__comment">// Use the supplied resource key or try to obtain one</span></div><div class="c-code__line">  <span class="c-code__comment">// from the environment variable.</span></div><div class="c-code__line">  <span class="c-code__keyword">const</span> resourceKey = args.length &gt; 0 ? args[0] : process.env[<a class="code" href="class_example_utils.html">ExampleUtils</a>.RESOURCE_KEY_ENV_VAR];</div><div class="c-code__line"></div><div class="c-code__line">  <span class="c-code__keywordflow">if</span> (resourceKey) {</div><div class="c-code__line">    run(resourceKey, process.stdout);</div><div class="c-code__line">  } <span class="c-code__keywordflow">else</span> {</div><div class="c-code__line">    console.error(<span class="c-code__stringliteral">&#39;No resource key specified on the command line or in the &#39;</span> +</div><div class="c-code__line">    `the environment variable <span class="c-code__stringliteral">&#39;${ExampleUtils.RESOURCE_KEY_ENV_VAR}&#39;</span>. ` +</div><div class="c-code__line">    <span class="c-code__stringliteral">&#39;The 51Degrees cloud service is accessed using a \&#39;ResourceKey\&#39;. &#39;</span> +</div><div class="c-code__line">    <span class="c-code__stringliteral">&#39;For more information &#39;</span> +</div><div class="c-code__line">    <span class="c-code__stringliteral">&#39;see https://51degrees.com/documentation/_info__resource_keys.html. &#39;</span> +</div><div class="c-code__line">    <span class="c-code__stringliteral">&#39;Native model lookup is not available as a free service. This means that &#39;</span> +</div><div class="c-code__line">    <span class="c-code__stringliteral">&#39;you will first need a license key, which can be purchased from our &#39;</span> +</div><div class="c-code__line">    <span class="c-code__stringliteral">&#39;pricing page: https://51degrees.com/pricing. Once this is done, a resource &#39;</span> +</div><div class="c-code__line">    <span class="c-code__stringliteral">&#39;key with the properties required by this example can be created at &#39;</span> +</div><div class="c-code__line">    <span class="c-code__stringliteral">&#39;https://configure.51degrees.com/1QWJwHxl. You can now populate the &#39;</span> +</div><div class="c-code__line">    <span class="c-code__stringliteral">&#39;environment variable mentioned at the start of this message with the &#39;</span> +</div><div class="c-code__line">    <span class="c-code__stringliteral">&#39;resource key or pass it as the first argument on the command line.&#39;</span>);</div><div class="c-code__line">  }</div><div class="c-code__line">};</div><div class="c-code__line"></div><div class="c-code__line">module.exports = {</div><div class="c-code__line">  run</div><div class="c-code__line">};</div></div> </div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
