<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Device Detection Node.js: onpremise/useragentclienthints-web/userAgentClientHintsWeb.js</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="../../documentation/4.4/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees Device Detection Node.js
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">51Degrees Device Detection for Node.js</div>
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('onpremise_2useragentclienthints-web_2user_agent_client_hints_web_8js-example.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="g-docs__header">
<h2 class="g-docs__page-title">onpremise/useragentclienthints-web/userAgentClientHintsWeb.js</h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<p>This example is available in full on <a href="https://github.com/51Degrees/device-detection-node/blob/master/fiftyone.devicedetection.onpremise/examples/onpremise/useragentclienthints-web/userAgentClientHintsWeb.js">GitHub</a>.Expected output:</p>
<p>User Agent Client Hints Example</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">Hardware Vendor: [...]</div><div class="c-code__line">Hardware Name: [...]</div><div class="c-code__line">Device Type: [...]</div><div class="c-code__line"> ...</div></div><div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__comment">/* *********************************************************************</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><span class="c-code__comment"> * Copyright 2023 51 Degrees Mobile Experts Limited, Davidson House,</span></div><div class="c-code__line"><span class="c-code__comment"> * Forbury Square, Reading, Berkshire, United Kingdom RG1 3EU.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is licensed under the European Union Public Licence</span></div><div class="c-code__line"><span class="c-code__comment"> * (EUPL) v.1.2 and is subject to its terms as set out below.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If a copy of the EUPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><span class="c-code__comment"> * one at https://opensource.org/licenses/EUPL-1.2.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * The &#39;Compatible Licences&#39; set out in the Appendix to the EUPL (as may be</span></div><div class="c-code__line"><span class="c-code__comment"> * amended by the European Commission) shall be deemed incompatible for</span></div><div class="c-code__line"><span class="c-code__comment"> * the purposes of the Work and the provisions of the compatibility</span></div><div class="c-code__line"><span class="c-code__comment"> * clause in Article 5 of the EUPL shall not apply.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If using the Work as, or as part of, a network application, by</span></div><div class="c-code__line"><span class="c-code__comment"> * including the attribution notice(s) required under Article 5 of the EUPL</span></div><div class="c-code__line"><span class="c-code__comment"> * in the end user terms of the application under an appropriate heading,</span></div><div class="c-code__line"><span class="c-code__comment"> * such notice(s) shall fulfill the requirements of that article.</span></div><div class="c-code__line"><span class="c-code__comment"> * ********************************************************************* */</span></div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> path = require(<span class="c-code__stringliteral">&#39;path&#39;</span>);</div><div class="c-code__line"><span class="c-code__keyword">const</span> require51 = (requestedPackage) =&gt; {</div><div class="c-code__line">  <span class="c-code__keywordflow">try</span> {</div><div class="c-code__line">    <span class="c-code__keywordflow">return</span> require(path.join(__dirname, <span class="c-code__stringliteral">&#39;/../../../node_modules/&#39;</span>, requestedPackage));</div><div class="c-code__line">  } <span class="c-code__keywordflow">catch</span> (e) {</div><div class="c-code__line">    <span class="c-code__keywordflow">return</span> require(path.join(__dirname, <span class="c-code__stringliteral">&#39;/../../../../&#39;</span>, requestedPackage));</div><div class="c-code__line">  }</div><div class="c-code__line">};</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> core = require51(<span class="c-code__stringliteral">&#39;fiftyone.pipeline.core&#39;</span>);</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> <a name="_a0"></a><a class="code" href="class_device_detection_on_premise_pipeline_builder.html">DeviceDetectionOnPremisePipelineBuilder</a> =</div><div class="c-code__line">  require51(<span class="c-code__stringliteral">&#39;fiftyone.devicedetection.onpremise&#39;</span>).DeviceDetectionOnPremisePipelineBuilder;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> fs = require(<span class="c-code__stringliteral">&#39;fs&#39;</span>);</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__comment">// Load in a datafile</span></div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> datafile = (process.env.directory || __dirname) + <span class="c-code__stringliteral">&#39;/../../../device-detection-cxx/device-detection-data/51Degrees-LiteV4.1.hash&#39;</span>;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keywordflow">if</span> (!fs.existsSync(datafile)) {</div><div class="c-code__line">  console.error(<span class="c-code__stringliteral">&quot;The datafile required by this example is not present. Please ensure that the &#39;device-detection-data&#39; submodule has been fetched.&quot;</span>);</div><div class="c-code__line">  <span class="c-code__keywordflow">throw</span> (<span class="c-code__stringliteral">&quot;No data file at &#39;&quot;</span> + datafile + <span class="c-code__stringliteral">&quot;&#39;&quot;</span>);</div><div class="c-code__line">}</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__comment">// Helper function to read property values from flowData</span></div><div class="c-code__line"><span class="c-code__keyword">const</span> getValueHelper = (flowData, propertyKey) =&gt; {</div><div class="c-code__line">  <span class="c-code__keyword">const</span> device = flowData.device;</div><div class="c-code__line">  <span class="c-code__keywordflow">try</span> {</div><div class="c-code__line">    <span class="c-code__keyword">const</span> <span class="c-code__keyword">property</span> = device[propertyKey];</div><div class="c-code__line">    <span class="c-code__keywordflow">if</span> (property.hasValue &amp;&amp; property) {</div><div class="c-code__line">      <span class="c-code__keywordflow">return</span> <span class="c-code__keyword">property</span>.value;</div><div class="c-code__line">    } <span class="c-code__keywordflow">else</span> {</div><div class="c-code__line">      <span class="c-code__keywordflow">return</span> <span class="c-code__keyword">property</span>.noValueMessage;</div><div class="c-code__line">    }</div><div class="c-code__line">  } <span class="c-code__keywordflow">catch</span> (error) {</div><div class="c-code__line">    <span class="c-code__keywordflow">return</span> <span class="c-code__stringliteral">&#39;Not found in datafile&#39;</span>;</div><div class="c-code__line">  }</div><div class="c-code__line">};</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__comment">// Pipeline variable to be used</span></div><div class="c-code__line">let pipeline;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> setPipeline = (properties) =&gt; {</div><div class="c-code__line">  pipeline = <span class="c-code__keyword">new</span> <a class="code" href="class_device_detection_on_premise_pipeline_builder.html">DeviceDetectionOnPremisePipelineBuilder</a>({</div><div class="c-code__line">    performanceProfile: <span class="c-code__stringliteral">&#39;MaxPerformance&#39;</span>,</div><div class="c-code__line">    dataFile: datafile,</div><div class="c-code__line">    autoUpdate: <span class="c-code__keyword">false</span>,</div><div class="c-code__line">    restrictedProperties: properties</div><div class="c-code__line">  }).build();</div><div class="c-code__line"></div><div class="c-code__line">  <span class="c-code__comment">// Logging of errors and other messages.</span></div><div class="c-code__line">  <span class="c-code__comment">// Valid logs types are info, debug, warn, error</span></div><div class="c-code__line">  pipeline.on(<span class="c-code__stringliteral">&#39;error&#39;</span>, console.error);</div><div class="c-code__line">};</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> http = require(<span class="c-code__stringliteral">&#39;http&#39;</span>);</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">const</span> server = http.createServer((req, res) =&gt; {</div><div class="c-code__line">  <span class="c-code__keyword">const</span> flowData = pipeline.createFlowData();</div><div class="c-code__line"></div><div class="c-code__line">  <span class="c-code__comment">// Add any information from the request</span></div><div class="c-code__line">  <span class="c-code__comment">// (headers, cookies and additional client side provided information)</span></div><div class="c-code__line">  flowData.evidence.addFromRequest(req);</div><div class="c-code__line"></div><div class="c-code__line">  flowData.process().then(<span class="c-code__keyword">function</span> () {</div><div class="c-code__line">    res.statusCode = 200;</div><div class="c-code__line"></div><div class="c-code__line">    <span class="c-code__comment">// Some browsers require that extra HTTP headers are explicitly</span></div><div class="c-code__line">    <span class="c-code__comment">// requested. So set whatever headers are required by the browser in</span></div><div class="c-code__line">    <span class="c-code__comment">// order to return the evidence needed by the pipeline.</span></div><div class="c-code__line">    <span class="c-code__comment">// More info on this can be found at</span></div><div class="c-code__line">    <span class="c-code__comment">// https://51degrees.com/blog/user-agent-client-hints</span></div><div class="c-code__line">    core.Helpers.setResponseHeaders(res, flowData);</div><div class="c-code__line"></div><div class="c-code__line">    res.setHeader(<span class="c-code__stringliteral">&#39;Content-Type&#39;</span>, <span class="c-code__stringliteral">&#39;text/html&#39;</span>);</div><div class="c-code__line"></div><div class="c-code__line">    let output = <span class="c-code__stringliteral">&#39;&#39;</span>;</div><div class="c-code__line"></div><div class="c-code__line">    <span class="c-code__comment">// Generate the HTML</span></div><div class="c-code__line"></div><div class="c-code__line">    output = <span class="c-code__stringliteral">&#39;&lt;h2&gt;User Agent Client Hints Example&lt;/h2&gt;&#39;</span>;</div><div class="c-code__line"></div><div class="c-code__line">    output += `</div><div class="c-code__line"></div><div class="c-code__line">        &lt;p&gt;</div><div class="c-code__line">        By <span class="c-code__keywordflow">default</span>, the user-agent, sec-ch-ua and sec-ch-ua-mobile HTTP headers</div><div class="c-code__line">        are sent.</div><div class="c-code__line">        &lt;br /&gt;</div><div class="c-code__line">        This means that on the first request, the server can determine the</div><div class="c-code__line">        browser from sec-ch-ua <span class="c-code__keywordflow">while</span> other details must be derived from the</div><div class="c-code__line">        user-agent.</div><div class="c-code__line">        &lt;br /&gt;</div><div class="c-code__line">        If the server determines that the browser supports client hints, then</div><div class="c-code__line">        it may request additional client hints headers by setting the</div><div class="c-code__line">        Accept-CH header in the response.</div><div class="c-code__line">        &lt;br /&gt;</div><div class="c-code__line">        Select the &lt;strong&gt;Make second request&lt;/strong&gt; button below,</div><div class="c-code__line">        to use send another request to the server. This time, any</div><div class="c-code__line">        additional client hints headers that have been requested</div><div class="c-code__line">        will be included.</div><div class="c-code__line">        &lt;/p&gt;</div><div class="c-code__line">    </div><div class="c-code__line">        &lt;button type=<span class="c-code__stringliteral">&quot;button&quot;</span> onclick=<span class="c-code__stringliteral">&quot;redirect()&quot;</span>&gt;Make second request&lt;/button&gt;</div><div class="c-code__line"></div><div class="c-code__line">        &lt;script&gt;</div><div class="c-code__line">    </div><div class="c-code__line">            <span class="c-code__comment">// This script will run when button will be clicked and device detection request will again </span></div><div class="c-code__line">            <span class="c-code__comment">// be sent to the server with all additional client hints that was requested in the previous</span></div><div class="c-code__line">            <span class="c-code__comment">// response by the server.</span></div><div class="c-code__line">            <span class="c-code__comment">// Following sequence will be followed.</span></div><div class="c-code__line">            <span class="c-code__comment">// 1. User will send the first request to the web server for detection.</span></div><div class="c-code__line">            <span class="c-code__comment">// 2. Web Server will return the properties in response based on the headers sent in the request. Along </span></div><div class="c-code__line">            <span class="c-code__comment">// with the properties, it will also send a new header field Accept-CH in response indicating the additional</span></div><div class="c-code__line">            <span class="c-code__comment">// evidence it needs. It builds the new response header using SetHeader[Component name]Accept-CH properties </span></div><div class="c-code__line">            <span class="c-code__comment">// where Component Name is the name of the component for which properties are required.</span></div><div class="c-code__line">            <span class="c-code__comment">// 3. When &quot;Make second request&quot; button will be clicked, device detection request will again </span></div><div class="c-code__line">            <span class="c-code__comment">// be sent to the server with all additional client hints that was requested in the previous</span></div><div class="c-code__line">            <span class="c-code__comment">// response by the server.</span></div><div class="c-code__line">            <span class="c-code__comment">// 4. Web Server will return the properties based on the new User Agent Client Hint headers </span></div><div class="c-code__line">            <span class="c-code__comment">// being used as evidence.</span></div><div class="c-code__line">    </div><div class="c-code__line">            <span class="c-code__keyword">function</span> redirect() {</div><div class="c-code__line">                sessionStorage.reloadAfterPageLoad = <span class="c-code__keyword">true</span>;</div><div class="c-code__line">                window.location.reload(<span class="c-code__keyword">true</span>);</div><div class="c-code__line">                }</div><div class="c-code__line">    </div><div class="c-code__line">            window.onload = <span class="c-code__keyword">function</span> () { </div><div class="c-code__line">                <span class="c-code__keywordflow">if</span> ( sessionStorage.reloadAfterPageLoad ) {</div><div class="c-code__line">                document.getElementById(<span class="c-code__stringliteral">&#39;description&#39;</span>).innerHTML = <span class="c-code__stringliteral">&quot;&lt;p&gt;The information shown below is determined using &lt;strong&gt;User Agent Client Hints&lt;/strong&gt; that was sent in the request to obtain additional evidence. If no additional information appears then it may indicate an external problem such as &lt;strong&gt;User Agent Client Hints&lt;/strong&gt; being disabled in your browser.&lt;/p&gt;&quot;</span>;</div><div class="c-code__line">                sessionStorage.reloadAfterPageLoad = <span class="c-code__keyword">false</span>;</div><div class="c-code__line">                }</div><div class="c-code__line">                <span class="c-code__keywordflow">else</span>{</div><div class="c-code__line">                document.getElementById(<span class="c-code__stringliteral">&#39;description&#39;</span>).innerHTML = <span class="c-code__stringliteral">&quot;&lt;p&gt;The following values are determined by sever-side device detection on the first request.&lt;/p&gt;&quot;</span>;</div><div class="c-code__line">                }</div><div class="c-code__line">            }</div><div class="c-code__line"></div><div class="c-code__line">        &lt;/script&gt;</div><div class="c-code__line"></div><div class="c-code__line">            &lt;div <span class="c-code__keywordtype">id</span>=<span class="c-code__stringliteral">&quot;evidence&quot;</span>&gt;</div><div class="c-code__line">              &lt;strong&gt;&lt;/br&gt;Evidence values used: &lt;/strong&gt;</div><div class="c-code__line">              &lt;table&gt;</div><div class="c-code__line">                &lt;tr&gt;</div><div class="c-code__line">                  &lt;th&gt;Key&lt;/th&gt;</div><div class="c-code__line">                  &lt;th&gt;Value&lt;/th&gt;</div><div class="c-code__line">                &lt;/tr&gt;</div><div class="c-code__line">    </div><div class="c-code__line">        `;</div><div class="c-code__line">    <span class="c-code__keyword">const</span> evidences = pipeline.getElement(<span class="c-code__stringliteral">&#39;device&#39;</span>).evidenceKeyFilter.filterEvidence(flowData.evidence.getAll());</div><div class="c-code__line"></div><div class="c-code__line">    <span class="c-code__keywordflow">for</span> (<span class="c-code__keyword">const</span> key in evidences) {</div><div class="c-code__line">      output += <span class="c-code__stringliteral">&#39;&lt;tr&gt;&#39;</span>;</div><div class="c-code__line">      output += <span class="c-code__stringliteral">&#39;&lt;td&gt;&#39;</span> + key + <span class="c-code__stringliteral">&#39;&lt;/td&gt;&#39;</span>;</div><div class="c-code__line">      output += <span class="c-code__stringliteral">&#39;&lt;td&gt;&#39;</span> + evidences[key] + <span class="c-code__stringliteral">&#39;&lt;/td&gt;&#39;</span>;</div><div class="c-code__line">      output += <span class="c-code__stringliteral">&#39;&lt;/&gt;&#39;</span>;</div><div class="c-code__line">    }</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;/table&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div><div class="c-code__line"></div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;div id=description&gt;&lt;/div&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;div id=&quot;content&quot;&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;p&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;strong&gt;Detection results:&lt;/strong&gt;&lt;/br&gt;&lt;/br&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;b&gt;Hardware Vendor:&lt;/b&gt; &#39;</span> + getValueHelper(flowData, <span class="c-code__stringliteral">&#39;hardwarevendor&#39;</span>);</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;br /&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;b&gt;Hardware Name:&lt;/b&gt; &#39;</span> + getValueHelper(flowData, <span class="c-code__stringliteral">&#39;hardwarename&#39;</span>);</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;br /&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;b&gt;Device Type:&lt;/b&gt; &#39;</span> + getValueHelper(flowData, <span class="c-code__stringliteral">&#39;devicetype&#39;</span>);</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;br /&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;b&gt;Platform Vendor:&lt;/b&gt; &#39;</span> + getValueHelper(flowData, <span class="c-code__stringliteral">&#39;platformvendor&#39;</span>);</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;br /&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;b&gt;Platform Name:&lt;/b&gt; &#39;</span> + getValueHelper(flowData, <span class="c-code__stringliteral">&#39;platformname&#39;</span>);</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;br /&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;b&gt;Platform Version:&lt;/b&gt; &#39;</span> + getValueHelper(flowData, <span class="c-code__stringliteral">&#39;platformversion&#39;</span>);</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;br /&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;b&gt;Browser Vendor:&lt;/b&gt; &#39;</span> + getValueHelper(flowData, <span class="c-code__stringliteral">&#39;browservendor&#39;</span>);</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;br /&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;b&gt;Browser Name:&lt;/b&gt; &#39;</span> + getValueHelper(flowData, <span class="c-code__stringliteral">&#39;browsername&#39;</span>);</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;br /&gt;&#39;</span>;</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;b&gt;Browser Version:&lt;/b&gt; &#39;</span> + getValueHelper(flowData, <span class="c-code__stringliteral">&#39;browserversion&#39;</span>);</div><div class="c-code__line">    output += <span class="c-code__stringliteral">&#39;&lt;br /&gt;&lt;/div&gt;&#39;</span>;</div><div class="c-code__line"></div><div class="c-code__line">    res.end(output);</div><div class="c-code__line">  });</div><div class="c-code__line">});</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__comment">// Don&#39;t run the server if under TEST</span></div><div class="c-code__line"><span class="c-code__keywordflow">if</span> (process.env.JEST_WORKER_ID === undefined) {</div><div class="c-code__line">  setPipeline(<span class="c-code__keyword">null</span>);</div><div class="c-code__line">  <span class="c-code__keyword">const</span> port = 3001;</div><div class="c-code__line">  <span class="c-code__keyword">const</span> hostname = <span class="c-code__stringliteral">&#39;localhost&#39;</span>;</div><div class="c-code__line">  server.listen(port, hostname);</div><div class="c-code__line">  console.log(`Server listening on: http:<span class="c-code__comment">//${hostname}:${port}`);</span></div><div class="c-code__line">};</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__comment">// Export server object and set pipeline.</span></div><div class="c-code__line">module.exports = {</div><div class="c-code__line">  server,</div><div class="c-code__line">  setPipeline</div><div class="c-code__line">};</div></div> </div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
